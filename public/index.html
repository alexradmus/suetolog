<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Suetolog High Caps Backtester</title>
    <link rel="stylesheet" href="style.css" />
    <script
      src="https://cdn.jsdelivr.net/npm/lightweight-charts@4.1.0/dist/lightweight-charts.standalone.production.js"
      defer
    ></script>
    <script type="module" src="app.js" defer></script>
  </head>
  <body>
    <header class="page-header">
      <h1>Suetolog high caps — Backtester</h1>
    </header>
    <main class="layout">
      <section class="panel">
        <form id="control-form" class="form">
          <input id="interval" name="interval" type="hidden" value="60" />
          <div class="form-row form-row--full">
            <label for="symbol">Symbol</label>
            <input id="symbol" name="symbol" type="text" value="BTCUSDT" />
          </div>
          <div class="form-row">
            <label for="days">Days</label>
            <input id="days" name="days" type="number" min="1" max="365" value="14" />
          </div>
          <div class="form-row">
            <label for="length">Length</label>
            <input id="length" name="length" type="number" min="1" value="48" />
          </div>
          <div class="form-row">
            <label for="qty_pct">Qty %</label>
            <input id="qty_pct" name="qty_pct" type="number" min="0.01" step="0.01" value="1" />
          </div>
          <div class="form-row">
            <label for="fees_percent">Fees (%)</label>
            <input
              id="fees_percent"
              name="fees_percent"
              type="number"
              min="0"
              step="0.001"
              value="0.075"
            />
          </div>
          <div class="form-row">
            <label for="slippage_percent">Slippage (%)</label>
            <input
              id="slippage_percent"
              name="slippage_percent"
              type="number"
              min="0"
              step="0.001"
              value="0"
            />
          </div>
          <div class="form-row">
            <label for="multiplicator_long">Long multiplier</label>
            <input
              id="multiplicator_long"
              name="multiplicator_long"
              type="number"
              step="0.1"
              value="1"
            />
          </div>
          <div class="form-row">
            <label for="profit_multiplicator_long">Long profit multiplier</label>
            <input
              id="profit_multiplicator_long"
              name="profit_multiplicator_long"
              type="number"
              step="0.1"
              value="1.3"
            />
          </div>
          <div class="form-row">
            <label for="multiplicator_short">Short multiplier</label>
            <input
              id="multiplicator_short"
              name="multiplicator_short"
              type="number"
              step="0.1"
              value="2.5"
            />
          </div>
          <div class="form-row">
            <label for="profit_multiplicator_short">Short profit multiplier</label>
            <input
              id="profit_multiplicator_short"
              name="profit_multiplicator_short"
              type="number"
              step="0.1"
              value="0.8"
            />
          </div>
          <div class="form-row">
            <label for="tp_pct">TP %</label>
            <input
              id="tp_pct"
              name="tp_pct"
              type="number"
              min="0"
              step="0.01"
              placeholder="0 (по формуле)"
            />
          </div>
          <div class="form-row">
            <label for="sl_pct">SL %</label>
            <input
              id="sl_pct"
              name="sl_pct"
              type="number"
              min="0"
              step="0.01"
              value="0.5"
            />
          </div>
          <div class="form-row">
            <label for="max_hold_bars">Max bars in trade</label>
            <input
              id="max_hold_bars"
              name="max_hold_bars"
              type="number"
              min="0"
              step="1"
              value="15"
            />
          </div>
          <div class="form-row form-row--checkbox">
            <label for="long">Enable Long</label>
            <input id="long" name="long" type="checkbox" checked />
          </div>
          <div class="form-row form-row--checkbox">
            <label for="short">Enable Short</label>
            <input id="short" name="short" type="checkbox" checked />
          </div>
          <div class="form-actions">
            <button type="submit">Run</button>
            <span id="status" class="status"></span>
          </div>
          <p id="error" class="error" role="alert"></p>
        </form>
      </section>
      <section class="chart-area">
        <div class="chart-toolbar">
          <div class="tf-switch" id="timeframe-switch">
            <button type="button" data-interval="1">1m</button>
            <button type="button" data-interval="3">3m</button>
            <button type="button" data-interval="5">5m</button>
            <button type="button" data-interval="15">15m</button>
            <button type="button" data-interval="60" class="active">1h</button>
            <button type="button" data-interval="240">4h</button>
            <button type="button" data-interval="1440">1d</button>
          </div>
          <div id="candle-info" class="candle-info">—</div>
        </div>
        <section class="metrics" id="metrics"></section>
        <div class="chart-wrapper">
          <div id="chart" class="chart"></div>
        </div>
      </section>
      <section class="trades">
        <h2>Trades</h2>
        <div class="table-wrapper">
          <table id="trades-table">
            <thead>
              <tr>
                <th>#</th>
                <th>Side</th>
                <th>Entry</th>
                <th>Exit</th>
                <th>Entry Price</th>
                <th>Exit Price</th>
                <th>Qty</th>
                <th>Net PnL</th>
                <th>Reason</th>
            </tr>
          </thead>
          <tbody></tbody>
          </table>
        </div>
      </section>
    </main>
  </body>
</html>
